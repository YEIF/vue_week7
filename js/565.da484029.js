"use strict";(self["webpackChunkvue_week7"]=self["webpackChunkvue_week7"]||[]).push([[565],{6060:function(e,t,a){a.d(t,{Z:function(){return c}});var i=a(6252),n=a(1743);const s={alt:"loading.gif",src:n};function o(e,t,a,n,o,l){return(0,i.wg)(),(0,i.iD)("img",s)}var l={},r=a(3744);const g=(0,r.Z)(l,[["render",o]]);var c=g},4053:function(e,t,a){a.d(t,{Z:function(){return k}});var i=a(6252),n=a(3577),s=a(9963);const o={"aria-label":"Page navigation example"},l={class:"pagination"},r=(0,i._)("span",{"aria-hidden":"true"},"«",-1),g=[r],c=["onClick"],d=(0,i._)("span",{"aria-hidden":"true"},"»",-1),p=[d];function u(e,t,a,r,d,u){return(0,i.wg)(),(0,i.iD)("nav",o,[(0,i._)("ul",l,[(0,i._)("li",{class:(0,n.C_)(["page-item",{disabled:!a.pages.has_pre}])},[(0,i._)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=(0,s.iM)((e=>u.changePages(a.pages.current_page-1)),["prevent"]))},g)],2),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.pages.total_pages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,n.C_)(["page-item",{active:e===a.pages.current_page}]),key:e+123},[(0,i._)("a",{class:"page-link",href:"#",onClick:(0,s.iM)((t=>u.changePages(e)),["prevent"])},(0,n.zw)(e),9,c)],2)))),128)),(0,i._)("li",{class:(0,n.C_)(["page-item",{disabled:!a.pages.has_next}])},[(0,i._)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[1]||(t[1]=(0,s.iM)((e=>u.changePages(a.pages.current_page+1)),["prevent"]))},p)],2)])])}var h={props:["pages"],methods:{changePages(e){this.$emit("change-pages",e)}}},_=a(3744);const m=(0,_.Z)(h,[["render",u]]);var k=m},6565:function(e,t,a){a.r(t),a.d(t,{default:function(){return P}});var i=a(6252),n=a(3577);const s={class:"container"},o={class:"mt-4"},l={class:"table align-middle"},r=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",null,"圖片"),(0,i._)("th",null,"商品名稱"),(0,i._)("th",null,"價格"),(0,i._)("th")])],-1),g={style:{width:"200px"}},c={key:0,class:"h5"},d={key:1,class:"h6"},p={key:2,class:"h5"},u={class:"btn-group btn-group-sm"},h=(0,i.Uk)(" 查看更多 "),_=["onClick","disabled"],m={key:0,class:"fas fa-spinner fa-pulse"},k=(0,i.Uk)(" 加到購物車 ");function v(e,t,a,v,b,f){const w=(0,i.up)("LoadingComponent"),C=(0,i.up)("VLoading"),L=(0,i.up)("router-link"),y=(0,i.up)("pagination-Component");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(C,{active:b.isLoading,"z-index":1060},{default:(0,i.w5)((()=>[(0,i.Wm)(w)])),_:1},8,["active"]),(0,i._)("div",s,[(0,i._)("div",o,[(0,i._)("table",l,[r,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(b.products,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id},[(0,i._)("td",g,[(0,i._)("div",{style:(0,n.j5)([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${e.imageUrl})`}])},null,4)]),(0,i._)("td",null,(0,n.zw)(e.title),1),(0,i._)("td",null,[e.price?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",c,(0,n.zw)(e.origin_price)+" 元 ",1)),e.price?((0,i.wg)(),(0,i.iD)("del",d,"原價 "+(0,n.zw)(e.origin_price)+" 元",1)):(0,i.kq)("",!0),e.price?((0,i.wg)(),(0,i.iD)("div",p," 現在只要 "+(0,n.zw)(e.price)+" 元 ",1)):(0,i.kq)("",!0)]),(0,i._)("td",null,[(0,i._)("div",u,[(0,i.Wm)(L,{to:`/product/${e.id}`,class:"btn btn-primary"},{default:(0,i.w5)((()=>[h])),_:2},1032,["to"]),(0,i._)("button",{type:"button",class:"btn btn-outline-danger",onClick:t=>f.addToCart(e.id,e.title),disabled:b.isLoadingItem===e.id},[b.isLoadingItem===e.id?((0,i.wg)(),(0,i.iD)("i",m)):(0,i.kq)("",!0),k],8,_)])])])))),128))])]),(0,i.Wm)(y,{pages:b.pagination,onChangePages:f.getProducts},null,8,["pages","onChangePages"])])])],64)}var b=a(4902),f=a(4053),w=a(6060),C={data(){return{products:[],pagination:{},isLoadingItem:!1,loadingStatus:{loadingItem:""},isLoading:!1}},components:{PaginationComponent:f.Z,LoadingComponent:w.Z},methods:{getProducts(e=1){this.isLoading=!0,this.$http.get(`https://vue3-course-api.hexschool.io/v2/api/clothes/products/?page=${e}`).then((e=>{this.products=e.data.products,this.pagination=e.data.pagination,this.isLoading=!1})).catch((e=>{console.dir(e),this.isLoading=!1}))},addToCart(e,t,a=1){const i={product_id:e,qty:a};this.isLoadingItem=e;const n="https://vue3-course-api.hexschool.io/v2/api/clothes/cart/";this.$http.post(n,{data:i}).then((e=>{this.isLoadingItem="",b.Z.emit("push-message",{style:"success",title:`${t}${e.data.message}`}),b.Z.emit("get-cart-num")})).catch((e=>{console.dir(e),this.isLoadingItem="",b.Z.emit("push-message",{style:"danger",title:`${e.response.data.message}`})}))}},mounted(){this.getProducts()}},L=a(3744);const y=(0,L.Z)(C,[["render",v]]);var P=y},1743:function(e,t,a){e.exports=a.p+"img/PandaLoading.e2d8d2ba.gif"}}]);
//# sourceMappingURL=565.da484029.js.map